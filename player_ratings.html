<!DOCTYPE html>
    <body>
        <style>
            th, td {
                border: 1px solid black;
                font-size: small;
                font-weight: normal;
            }
            tr:first-child{
                column-span: 3;
            }
            #QB_TABLE caption{
                caption-side: top;
            }
            h1{
                font-size: 60px;
                text-align: center;
            }
            p{
                text-align: center;
            }
        </style>

        <h1 id="TITLE"> SECOND PAGE </h1>

        <p> DESCRIPTION HERE </p>

        <table id="QB_TABLE" style="display: inline-flex;width: 500px;">  

        </table>            
        <table id="WR_TABLE" style="display: inline-flex;width: 500px;" > </table>
        <table id="RB_TABLE" style="display: inline-flex;" > 
        </table>
    </body>
    <script >

        //Read CSV From internet
        //Youtube Tutorial: https://www.youtube.com/watch?v=RfMkdvN-23o

        //Build the file string
        var queryString = window.location.search;
        var urlParams = new URLSearchParams(queryString);
        var year = urlParams.get("year");
        document.getElementById("TITLE").innerHTML = year + " Player Ratings";

        
        const qb_file = "https://raw.githubusercontent.com/ColinAslett/SportsWebsite/main/PlayerData/StatSheet%20-%20QB_" + year + ".csv";
        getData(qb_file,"QB");
        const wr_file = "https://raw.githubusercontent.com/ColinAslett/SportsWebsite/main/PlayerData/StatSheet%20-%20WR_" + year + ".csv";
        getData(wr_file,"WR");
        const rb_file = "https://raw.githubusercontent.com/ColinAslett/SportsWebsite/main/PlayerData/StatSheet%20-%20RB_" + year + ".csv";
        getData(rb_file,"RB");
        async function getData(file_name,file_type){
            //"https://raw.githubusercontent.com/ColinAslett/SportsWebsite/main/PlayerData/StatSheet%20-%20QB_2021.csv"
            const response = await fetch(file_name);
            const data = await response.text();
            
            const rows = data.split("\n").slice(0);

            //var table_1 = "";
            //document.getElementById("first_row_QB").style.columnSpan = "3";
            var table_1 = "<tr> <th> </th> <th style=\"font-weight:bold;font-size:20px;\">" + file_type + " TABLE </th> <th> </th> </tr>";
            //table_1 += "<caption> " + file_type + " Table </caption>";
            for(let i = 0;i < rows.length;i++){
                let split_str = rows[i].split(",");
                let str = "<tr> <th> " + split_str[0] + " </th> <th> " + split_str[1] + "</th> <th> " + split_str[2] + " </th> </tr>";
                table_1 += str;
            }
            //table_1 += "</table>";
            if(file_type == "QB"){
                document.getElementById("QB_TABLE").innerHTML += table_1;
            }
            else if(file_type == "WR"){
                document.getElementById("WR_TABLE").innerHTML += table_1;
            }
            else if(file_type == "RB"){
                document.getElementById("RB_TABLE").innerHTML += table_1;
            }

            //console.log(rows);
        }



    </script>
</html>
